<!DOCTYPE html>
<html>
    <head>
        <title>Skyltprogram</title>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <div id="left"><textarea spellcheck="false" id="input">{
    "type": "junction",
    "properties": {
        "background": "#06a",
        "color": "white",
        "borderWidth": 4,
        "font": "\"TratexVersal\""
    },
    "nodes": {
        "left": {
            "anchor": { "x": "right", "y": "middle-first" },
            "data": {
                "type": "skylt",
                "elements": [
                    {
                        "type": "vagnr",
                        "properties": { "value": "E16", "background": "#097" }
                    },
                    {
                        "type": "text",
                        "properties": { "value": "OSLO" }
                    },
                    { "type": "newline" },
                    {
                        "type": "vagnr",
                        "properties": { "value": "66" }
                    },
                    {
                        "type": "text",
                        "properties": { "value": "SÄLEN" }
                    }
                ]
            }
        },
        "right": {
            "anchor": { "x": "left", "y": "middle-first" },
            "data": {
                "type": "skylt",
                "elements": [
                    {
                        "type": "vagnr",
                        "properties": { "value": "E16", "background": "#097" }
                    },
                    {
                        "type": "text",
                        "properties": { "value": "GÄVLE" }
                    },
                    { "type": "newline" },
                    {
                        "type": "text",
                        "properties": { "value": "BORLÄNGE" }
                    }
                ]
            }
        }
    }
}</textarea>
        </div>
        <div id="right"><iframe id="render" src="about:blank"></iframe></div>
        <script>
(function(){
    let data_input = document.getElementById("input"), fr = document.getElementById("render");

    data_input.addEventListener("change", () => {
        fr.setAttribute("src", "render.html?data=" + window.encodeURIComponent(JSON.stringify(JSON.parse(data_input.value))));
    });

    data_input.dispatchEvent(new Event("change"));
})();
        </script>
    </body>
</html>